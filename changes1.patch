From 8d2e02368eacfdfd3da86f48c3d953b506275af3 Mon Sep 17 00:00:00 2001
From: DenIS318 <11572080+DenIS318@users.noreply.github.com>
Date: Thu, 5 Jun 2025 00:22:04 +0500
Subject: [PATCH] admin: +ADMIN flag to write to admin chat (#86)

---
 code/modules/admin/verbs/adminsay.dm        | 2 +-
 code/modules/client/client_procs.dm         | 2 +-
 modular_nova/modules/admin/code/loud_say.dm | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/code/modules/admin/verbs/adminsay.dm b/code/modules/admin/verbs/adminsay.dm
index b988104dd23..f29d99291b0 100644
--- a/code/modules/admin/verbs/adminsay.dm
+++ b/code/modules/admin/verbs/adminsay.dm
@@ -1,4 +1,4 @@
-ADMIN_VERB(cmd_admin_say, R_NONE, "ASay", "Send a message to other admins", ADMIN_CATEGORY_MAIN, message as text)
+ADMIN_VERB(cmd_admin_say, R_ADMIN, "ASay", "Send a message to other admins", ADMIN_CATEGORY_MAIN, message as text) // SS1984 EDIT
 	message = emoji_parse(copytext_char(sanitize(message), 1, MAX_MESSAGE_LEN))
 	if(!message)
 		return
diff --git a/code/modules/client/client_procs.dm b/code/modules/client/client_procs.dm
index ab4c0cf6dfd..8563dfa0a94 100644
--- a/code/modules/client/client_procs.dm
+++ b/code/modules/client/client_procs.dm
@@ -1067,7 +1067,7 @@ GLOBAL_LIST_INIT(blacklisted_builds, list(
 				if("South")
 					movement_keys[key] = SOUTH
 				if(ADMIN_CHANNEL)
-					if(holder)
+					if(holder && check_rights(R_ADMIN,show_msg=0)) // SS1984 EDIT
 						var/asay = tgui_say_create_open_command(ADMIN_CHANNEL)
 						winset(src, "default-[REF(key)]", "parent=default;name=[key];command=[asay]")
 					else
diff --git a/modular_nova/modules/admin/code/loud_say.dm b/modular_nova/modules/admin/code/loud_say.dm
index 77940b379d0..0312096dfde 100644
--- a/modular_nova/modules/admin/code/loud_say.dm
+++ b/modular_nova/modules/admin/code/loud_say.dm
@@ -1,4 +1,4 @@
-ADMIN_VERB(cmd_loud_admin_say, R_NONE, "loudAsay", "Send a message to other admins (loudly).", ADMIN_CATEGORY_MAIN, msg as text)
+ADMIN_VERB(cmd_loud_admin_say, R_ADMIN, "loudAsay", "Send a message to other admins (loudly).", ADMIN_CATEGORY_MAIN, msg as text)
 	msg = emoji_parse(copytext_char(sanitize(msg), 1, MAX_MESSAGE_LEN))
 	if(!msg)
 		return
-- 
2.43.0.windows.1

