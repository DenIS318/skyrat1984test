!function(){var e,n,t=Object.prototype.hasOwnProperty,r=function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)t.call(r,o)&&(e[o]=r[o])}return e},o=function(e){var n=document.getElementById(e).getAttribute("content");return n==="["+e+"]"?null:n},a=window.Byond={};a.windowId=o("tgui:windowId"),window.__windowId__=a.windowId,a.BLINK=(n=(e=navigator.userAgent.match(/Chrome\/(\d+)\./))&&e[1])?parseInt(n,10):null;var i=(null!==a.BLINK||window.cef_to_byond)&&"127.0.0.1"===location.hostname&&"?external"!==location.search;a.IS_BYOND=i,a.strictMode=Boolean(Number(o("tgui:strictMode"))),a.__callbacks__=[];var s=function(e,n){return"object"==typeof n&&null!==n&&n.__number__?parseFloat(n.__number__):n};a.call=function(e,n){if(i){var r=(e||"")+"?",o=0;if(n){for(var a in n)if(t.call(n,a)){o++>0&&(r+="&");var s=n[a];null==s&&(s=""),r+=encodeURIComponent(a)+"="+encodeURIComponent(s)}}if(window.cef_to_byond){cef_to_byond("byond://"+r);return}if(r.length<2048){location.href="byond://"+r;return}var u=new XMLHttpRequest;u.open("GET",r),u.send()}},a.callAsync=function(e,n){if(!window.Promise)throw Error("Async calls require API level of ES2015 or later.");var t=a.__callbacks__.length,o=new window.Promise(function(e){a.__callbacks__.push(e)});return a.call(e,r({},n,{callback:"Byond.__callbacks__["+t+"]"})),o},a.topic=function(e){return a.call("",e)},a.command=function(e){return a.call("winset",{command:e})},a.winget=function(e,n){null===e&&(e="");var t=n instanceof Array,r=a.callAsync("winget",{id:e,property:t&&n.join(",")||n||"*"});return n&&"*"!==n&&!t&&(r=r.then(function(e){return e[n]})),r},a.winset=function(e,n,t){if(null===e)e="";else if("object"==typeof e)return a.call("winset",e);var o={};return"string"==typeof n?o[n]=t:r(o,n),o.id=e,a.call("winset",o)},a.parseJson=function(e){try{return JSON.parse(e,s)}catch(n){throw Error("JSON parsing error: "+(n&&n.message))}},a.sendMessage=function(e,n){var t="string"==typeof e?{type:e,payload:n}:e;null!==t.payload&&void 0!==t.payload&&(t.payload=JSON.stringify(t.payload)),r(t,{tgui:1,window_id:a.windowId}),a.topic(t)},a.injectMessage=function(e,n){window.update(JSON.stringify({type:e,payload:n}))},a.subscribe=function(e){window.update.flushQueue(e),window.update.listeners.push(e)},a.subscribeTo=function(e,n){var t=function(t,r){t===e&&n(r)};window.update.flushQueue(t),window.update.listeners.push(t)};var u={},l=function(e,n){var t=e.sheet;return!!t&&t.rules.length>0},c=function(e){if(!document.body){setTimeout(function(){c(e)});return}var n=document.body.childNodes,t=n[n.length-1];t.parentNode.insertBefore(e,t.nextSibling)},d=function(e){var n=e.url,t=e.type,r=e.sync,o=e.attempt||0;if(!u[n]){u[n]=e;var a=function(){if(o>=5){var r="Error: Failed to load the asset '"+n+"' after several attempts.";throw"css"===t&&(r+="NaNor you're trying to load an empty stylesheet that has no CSS rules in it."),Error(r)}setTimeout(function(){u[n]=null,e.attempt+=1,d(e)},500+500*o)};if("js"===t){var i=document.createElement("script");i.type="text/javascript",i.crossOrigin="anonymous",i.src=n,r?i.defer=!0:i.async=!0,i.onerror=function(){i.onerror=null,i.parentNode.removeChild(i),i=null,a()},c(i);return}if("css"===t){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.crossOrigin="anonymous",i.href=n,r||(i.media="only x");var s=function(){i.parentNode.removeChild(i),i=null,a()};i.onerror=function(){i.onerror=null,s()},i.onload=function(){if(i.onload=null,l(i,n)){i.media="all";return}s()},c(i);return}}};a.loadJs=function(e,n){d({url:e,sync:n,type:"js"})},a.loadCss=function(e,n){d({url:e,sync:n,type:"css"})},a.saveBlob=function(e,n,t){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(e,n);else if(window.showSaveFilePicker){var r={};r[e.type]=[t],window.showSaveFilePicker({suggestedName:n,types:[{description:"SS13 file",accept:r},]}).then(function(e){return e.createWritable()}).then(function(n){return n.write(e).then(function(){return n.close()})}).catch(function(){})}},a.iconRefMap={}}(),window.onerror=function(e,n,t,r,o){window.onerror.errorCount=(window.onerror.errorCount||0)+1;var a=o&&o.stack;!a&&(a=e+"\n   at "+n+":"+t,r&&(a+=":"+r)),a=window.__augmentStack__(a,o);var i=!0;let s=require("node:fs"),u="DEBUG MSG: "+e;if(s.writeFile("jsoutput.txt",u,e=>{e&&console.error(e)}),Byond.sendMessage({type:"log",message:u}),console.log(u),e.includes("ResizeObserver loop completed with undelivered notifications")&&(i=!1),Byond.strictMode&&i){var l=document.getElementById("FatalError"),c=document.getElementById("FatalError__stack");l&&(l.className="FatalError FatalError--visible",window.onerror.__stack__?window.onerror.__stack__+="\n\n"+a:window.onerror.__stack__=a,c.textContent=window.onerror.__stack__);var d=function(){Byond.winset(Byond.windowId,{titlebar:!0,"is-visible":!0,"can-resize":!0})};d(),setInterval(d,1e3)}return Byond.strictMode?Byond.sendMessage({type:"log",fatal:1,message:a}):window.onerror.errorCount<=1&&(a+="\nWindow is in non-strict mode, future errors are suppressed.",Byond.sendMessage({type:"log",message:a})),Byond.strictMode&&i&&(window.update=function(){},window.update.queue=[]),!0},window.onunhandledrejection=function(e){var n="UnhandledRejection";e.reason&&(n+=": "+(e.reason.message||e.reason.description||e.reason),e.reason.stack&&(e.reason.stack="UnhandledRejection: "+e.reason.stack)),window.onerror(n,null,null,null,e.reason)},window.__augmentStack__=function(e,n){return e+"\nUser Agent: "+navigator.userAgent},window.update=function(e){if(window.update.queueActive){window.update.queue.push(e);return}for(var n=Byond.parseJson(e),t=window.update.listeners,r=0;r<t.length;r++)t[r](n.type,n.payload)},window.update.listeners=[],window.update.queue=[],window.update.queueActive=!0,window.update.flushQueue=function(e){window.update.queueActive&&(window.update.queueActive=!1,window.setTimeout&&window.setTimeout(function(){window.update.queue=[]},0));for(var n=window.update.queue,t=0;t<n.length;t++){var r=Byond.parseJson(n[t]);e(r.type,r.payload)}},window.replaceHtml=function(e){for(var n=document.body.childNodes,t=0;t<n.length;t++)if(" tgui:inline-html-start "==n[t].nodeValue){for(;" tgui:inline-html-end "!=n[t].nodeValue;)n[t].remove();n[t].remove()}document.body.insertAdjacentHTML("afterbegin","<!-- tgui:inline-html-start -->"+e+"<!-- tgui:inline-html-end -->")};
